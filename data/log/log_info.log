25-10-01.14:34:03.097 [main            ] INFO  Application            - Starting Application using Java 17.0.12 on u_uta with PID 100212 (D:\_Code\java\big-market-utaaa\big-market-app\target\classes started by 24333 in D:\_Code\java\big-market-utaaa)
25-10-01.14:34:03.098 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-01.14:34:04.004 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-10-01.14:34:04.005 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-10-01.14:34:04.049 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 0 Redis repository interfaces.
25-10-01.14:34:04.871 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-10-01.14:34:04.878 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-10-01.14:34:04.879 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-01.14:34:04.879 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.83]
25-10-01.14:34:05.050 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-01.14:34:05.051 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1903 ms
25-10-01.14:34:05.617 [main            ] INFO  Version                - Redisson 3.27.1
25-10-01.14:34:05.748 [main            ] WARN  SequentialDnsAddressResolverFactory - DNS TCP fallback on UDP query timeout disabled. Upgrade Netty to 4.1.105 or higher.
25-10-01.14:34:05.880 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-10-01.14:34:05.898 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-10-01.14:34:06.259 [main            ] WARN  AbstractMethod         - [com.uta.infrastructure.persistent.dao.RaffleActivityOrderMapper.insert] Has been loaded by XML or SqlProvider or Mybatis's Annotation, so ignoring this injection for [class com.baomidou.mybatisplus.core.injector.methods.Insert]
25-10-01.14:34:07.292 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-10-01.14:34:07.366 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-10-01.14:34:07.378 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-10-01.14:34:07.380 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-10-01.14:34:07.475 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#100807ca:0/SimpleConnection@6d2f910b [delegate=amqp://admin@127.0.0.1:5672/, localPort= 54616]
25-10-01.14:34:07.575 [main            ] INFO  Application            - Started Application in 4.937 seconds (JVM running for 5.871)
25-10-01.14:34:08.168 [RMI TCP Connection(3)-172.31.112.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-01.14:34:08.168 [RMI TCP Connection(3)-172.31.112.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-01.14:34:08.173 [RMI TCP Connection(3)-172.31.112.1] INFO  DispatcherServlet      - Completed initialization in 5 ms
25-10-01.14:34:08.184 [RMI TCP Connection(4)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-10-01.14:34:08.536 [RMI TCP Connection(4)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-10-01.14:34:08.554 [RMI TCP Connection(4)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-10-01.14:34:08.571 [RMI TCP Connection(4)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-10-01.14:36:11.288 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-10-01.14:36:11.289 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-10-01.14:36:11.305 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-10-01.14:36:11.350 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-10-01.14:36:41.882 [http-nio-8091-exec-4] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-10-01.14:36:41.913 [http-nio-8091-exec-4] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-10-01.14:37:57.950 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-10-01.14:37:57.950 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-10-01.14:37:58.187 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-10-01.14:37:58.187 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-10-01.14:38:02.976 [main            ] INFO  Application            - Starting Application using Java 17.0.12 on u_uta with PID 108232 (D:\_Code\java\big-market-utaaa\big-market-app\target\classes started by 24333 in D:\_Code\java\big-market-utaaa)
25-10-01.14:38:02.976 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-01.14:38:03.715 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-10-01.14:38:03.717 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-10-01.14:38:03.755 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
25-10-01.14:38:04.441 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-10-01.14:38:04.447 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-10-01.14:38:04.448 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-01.14:38:04.448 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.83]
25-10-01.14:38:04.599 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-01.14:38:04.599 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1588 ms
25-10-01.14:38:05.068 [main            ] INFO  Version                - Redisson 3.27.1
25-10-01.14:38:05.194 [main            ] WARN  SequentialDnsAddressResolverFactory - DNS TCP fallback on UDP query timeout disabled. Upgrade Netty to 4.1.105 or higher.
25-10-01.14:38:05.315 [redisson-netty-1-5] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-10-01.14:38:05.331 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-10-01.14:38:05.629 [main            ] WARN  AbstractMethod         - [com.uta.infrastructure.persistent.dao.RaffleActivityOrderMapper.insert] Has been loaded by XML or SqlProvider or Mybatis's Annotation, so ignoring this injection for [class com.baomidou.mybatisplus.core.injector.methods.Insert]
25-10-01.14:38:06.524 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-10-01.14:38:06.597 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-10-01.14:38:06.609 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-10-01.14:38:06.610 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-10-01.14:38:06.643 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#1fa9692b:0/SimpleConnection@6aed4a23 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 57735]
25-10-01.14:38:06.695 [main            ] INFO  Application            - Started Application in 4.1 seconds (JVM running for 4.866)
25-10-01.14:38:07.038 [RMI TCP Connection(2)-172.31.112.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-01.14:38:07.038 [RMI TCP Connection(2)-172.31.112.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-01.14:38:07.040 [RMI TCP Connection(2)-172.31.112.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-10-01.14:38:07.049 [RMI TCP Connection(1)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-10-01.14:38:07.250 [RMI TCP Connection(1)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-10-01.14:38:07.280 [RMI TCP Connection(1)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-10-01.14:38:07.297 [RMI TCP Connection(1)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-10-01.14:38:13.308 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-10-01.14:38:13.309 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-10-01.14:38:13.328 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-10-01.14:38:13.414 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
25-10-01.14:40:38.436 [http-nio-8091-exec-9] WARN  DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'activityId' for method parameter type Long is not present]
25-10-01.14:40:48.833 [http-nio-8091-exec-6] INFO  RaffleActivityController - 活动抽奖 userId:utaaa activityId:null
25-10-01.14:40:48.835 [http-nio-8091-exec-6] ERROR RaffleActivityController - 活动抽奖失败 userId:utaaa activityId:null
com.uta.types.exception.AppException: null
	at com.uta.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:79)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-01.14:41:35.350 [http-nio-8091-exec-4] INFO  RaffleActivityController - 活动抽奖 userId:utaaa activityId:null
25-10-01.14:41:35.350 [http-nio-8091-exec-4] ERROR RaffleActivityController - 活动抽奖失败 userId:utaaa activityId:null
com.uta.types.exception.AppException: null
	at com.uta.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:79)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-01.14:41:51.606 [http-nio-8091-exec-11] INFO  RaffleActivityController - 活动抽奖 userId:utaaa activityId:100301
25-10-01.14:41:51.776 [http-nio-8091-exec-11] INFO  AbstractRaffleActivityPartake - 创建参与活动订单 userId:utaaa activityId:100301 userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"496262858692","orderState":"create","orderTime":1759160594000,"strategyId":100006,"userId":"utaaa"}
25-10-01.14:41:51.776 [http-nio-8091-exec-11] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:utaaa activityId:100301 orderId:496262858692
25-10-01.14:41:51.784 [http-nio-8091-exec-11] INFO  DefaultLogicChain      - 【抽奖责任链】-默认处理 userId=utaaa, strategyId=100006, ruleModel=default, awardId=102
25-10-01.14:41:51.785 [http-nio-8091-exec-11] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 utaaa 100006 102 rule_default
25-10-01.14:41:51.809 [http-nio-8091-exec-11] INFO  RuleLockLogicTreeNode  - 【规则过滤】-次数锁 userId:utaaa, strategyId:100006, awardId:102, ruleValue:1
25-10-01.14:41:51.818 [http-nio-8091-exec-11] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0001
25-10-01.14:41:51.819 [http-nio-8091-exec-11] INFO  RuleLuckAwardLogicTreeNode - 【规则过滤】-兜底奖品 userId:utaaa strategyId:100006 awardId:102 ruleValue:101:1,100
25-10-01.14:41:51.819 [http-nio-8091-exec-11] INFO  RuleLuckAwardLogicTreeNode - 【规则过滤】-兜底奖品 userId:utaaa strategyId:100006 awardId:101 awardRuleValue:1,100
25-10-01.14:41:51.820 [http-nio-8091-exec-11] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_luck_award code:0001
25-10-01.14:41:51.820 [http-nio-8091-exec-11] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 utaaa 100006 101 1,100
25-10-01.14:41:51.913 [http-nio-8091-exec-11] INFO  EventPublisher         - 发送MQ消息, topic:send_award, message:{"data":{"awardId":101,"awardTitle":"随机积分","userId":"utaaa"},"id":"22417182213","timestamp":1759300911828}
25-10-01.14:41:51.930 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award, message:{"data":{"awardId":101,"awardTitle":"随机积分","userId":"utaaa"},"id":"22417182213","timestamp":1759300911828}
25-10-01.14:43:07.812 [http-nio-8091-exec-14] INFO  RaffleActivityController - 活动抽奖 userId:utaaa activityId:100301
25-10-01.14:43:07.864 [http-nio-8091-exec-14] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:utaaa activityId:100301 orderId:421365101713
25-10-01.14:43:07.869 [http-nio-8091-exec-14] INFO  DefaultLogicChain      - 【抽奖责任链】-默认处理 userId=utaaa, strategyId=100006, ruleModel=default, awardId=102
25-10-01.14:43:07.869 [http-nio-8091-exec-14] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 utaaa 100006 102 rule_default
25-10-01.14:43:07.878 [http-nio-8091-exec-14] INFO  RuleLockLogicTreeNode  - 【规则过滤】-次数锁 userId:utaaa, strategyId:100006, awardId:102, ruleValue:1
25-10-01.14:43:07.882 [http-nio-8091-exec-14] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
25-10-01.14:43:07.882 [http-nio-8091-exec-14] INFO  RuleStockLogicTreeNode - 【规则过滤】-库存扣减 userId:utaaa strategyId:100006 awardId:102
25-10-01.14:43:07.909 [http-nio-8091-exec-14] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
25-10-01.14:43:07.910 [http-nio-8091-exec-14] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 utaaa 100006 102 null
25-10-01.14:43:07.928 [http-nio-8091-exec-14] INFO  EventPublisher         - 发送MQ消息, topic:send_award, message:{"data":{"awardId":102,"awardTitle":"随机积分","userId":"utaaa"},"id":"85842167485","timestamp":1759300987913}
25-10-01.14:43:07.929 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award, message:{"data":{"awardId":102,"awardTitle":"随机积分","userId":"utaaa"},"id":"85842167485","timestamp":1759300987913}
25-10-01.14:43:15.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】-更新奖品消耗库存 strategyId:100006, awardId:102
25-10-01.14:43:46.045 [http-nio-8091-exec-10] INFO  RaffleActivityController - 活动抽奖 userId:utaaa activityId:100301
25-10-01.14:43:46.068 [http-nio-8091-exec-10] WARN  ActivityRepository     - 用户月账户额度不够，userId:utaaa, activityId:100301, Day:2025-10-01
25-10-01.14:43:46.072 [http-nio-8091-exec-10] ERROR RaffleActivityController - 活动抽奖失败 userId:utaaa activityId:100301
com.uta.types.exception.AppException: null
	at com.uta.infrastructure.persistent.repository.ActivityRepository.lambda$saveCreatePartakeOrderAggregate$1(ActivityRepository.java:304)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.uta.infrastructure.persistent.repository.ActivityRepository.saveCreatePartakeOrderAggregate(ActivityRepository.java:248)
	at com.uta.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$1a34e098.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.uta.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$ff69f3ea.saveCreatePartakeOrderAggregate(<generated>)
	at com.uta.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:73)
	at com.uta.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at com.uta.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-01.14:45:13.951 [http-nio-8091-exec-15] INFO  RaffleActivityController - 活动抽奖 userId:utaaa activityId:100301
25-10-01.14:46:11.294 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m3s841ms784µs100ns).
25-10-01.14:46:11.294 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=57s751ms816µs300ns).
25-10-01.14:46:11.297 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m3s812ms11µs701ns).
25-10-01.14:46:11.298 [http-nio-8091-exec-15] WARN  ActivityRepository     - 用户月账户额度不够，userId:utaaa, activityId:100301, Day:2025-10-01
25-10-01.14:46:11.302 [http-nio-8091-exec-15] ERROR RaffleActivityController - 活动抽奖失败 userId:utaaa activityId:100301
com.uta.types.exception.AppException: null
	at com.uta.infrastructure.persistent.repository.ActivityRepository.lambda$saveCreatePartakeOrderAggregate$1(ActivityRepository.java:304)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.uta.infrastructure.persistent.repository.ActivityRepository.saveCreatePartakeOrderAggregate(ActivityRepository.java:248)
	at com.uta.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$1a34e098.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.uta.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$ff69f3ea.saveCreatePartakeOrderAggregate(<generated>)
	at com.uta.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:73)
	at com.uta.domain.activity.service.partake.AbstractRaffleActivityPartake.createOrder(AbstractRaffleActivityPartake.java:31)
	at com.uta.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-01.14:46:11.374 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-10-01.14:46:11.375 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-10-01.14:46:12.308 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-10-01.14:46:12.308 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-10-01.14:46:17.654 [main            ] INFO  Application            - Starting Application using Java 17.0.12 on u_uta with PID 116048 (D:\_Code\java\big-market-utaaa\big-market-app\target\classes started by 24333 in D:\_Code\java\big-market-utaaa)
25-10-01.14:46:17.655 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-01.14:46:18.364 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-10-01.14:46:18.366 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-10-01.14:46:18.407 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 0 Redis repository interfaces.
25-10-01.14:46:19.071 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
25-10-01.14:46:19.078 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
25-10-01.14:46:19.079 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-01.14:46:19.079 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.83]
25-10-01.14:46:19.236 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-01.14:46:19.237 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1549 ms
25-10-01.14:46:19.698 [main            ] INFO  Version                - Redisson 3.27.1
25-10-01.14:46:19.818 [main            ] WARN  SequentialDnsAddressResolverFactory - DNS TCP fallback on UDP query timeout disabled. Upgrade Netty to 4.1.105 or higher.
25-10-01.14:46:19.940 [redisson-netty-1-5] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
25-10-01.14:46:19.956 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
25-10-01.14:46:20.281 [main            ] WARN  AbstractMethod         - [com.uta.infrastructure.persistent.dao.RaffleActivityOrderMapper.insert] Has been loaded by XML or SqlProvider or Mybatis's Annotation, so ignoring this injection for [class com.baomidou.mybatisplus.core.injector.methods.Insert]
25-10-01.14:46:21.196 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-10-01.14:46:21.261 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
25-10-01.14:46:21.272 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
25-10-01.14:46:21.274 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-10-01.14:46:21.318 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#5d96d434:0/SimpleConnection@227c0cf7 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 63740]
25-10-01.14:46:21.369 [main            ] INFO  Application            - Started Application in 4.065 seconds (JVM running for 4.78)
25-10-01.14:46:21.468 [RMI TCP Connection(2)-172.31.112.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-01.14:46:21.469 [RMI TCP Connection(2)-172.31.112.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-01.14:46:21.471 [RMI TCP Connection(2)-172.31.112.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-10-01.14:46:21.475 [RMI TCP Connection(3)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-10-01.14:46:21.737 [RMI TCP Connection(3)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-10-01.14:46:21.758 [RMI TCP Connection(3)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-10-01.14:46:21.773 [RMI TCP Connection(3)-172.31.112.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-10-01.14:46:28.689 [http-nio-8091-exec-1] INFO  RaffleActivityController - 活动抽奖 userId:utaaa activityId:100301
25-10-01.14:46:30.573 [http-nio-8091-exec-1] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:utaaa activityId:100301 orderId:042292751183
25-10-01.14:46:30.589 [http-nio-8091-exec-1] INFO  DefaultLogicChain      - 【抽奖责任链】-默认处理 userId=utaaa, strategyId=100006, ruleModel=default, awardId=102
25-10-01.14:46:30.590 [http-nio-8091-exec-1] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 utaaa 100006 102 rule_default
25-10-01.14:46:30.592 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-10-01.14:46:30.607 [http-nio-8091-exec-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-10-01.14:46:52.258 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=51s650ms547µs100ns).
25-10-01.14:46:52.262 [http-nio-8091-exec-1] INFO  RuleLockLogicTreeNode  - 【规则过滤】-次数锁 userId:utaaa, strategyId:100006, awardId:102, ruleValue:1
25-10-01.14:47:09.560 [http-nio-8091-exec-1] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_lock code:0000
25-10-01.14:47:09.561 [http-nio-8091-exec-1] INFO  RuleStockLogicTreeNode - 【规则过滤】-库存扣减 userId:utaaa strategyId:100006 awardId:102
25-10-01.14:47:09.582 [http-nio-8091-exec-1] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock node:rule_stock code:0001
25-10-01.14:47:09.582 [http-nio-8091-exec-1] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 utaaa 100006 102 null
25-10-01.14:47:09.718 [http-nio-8091-exec-1] INFO  EventPublisher         - 发送MQ消息, topic:send_award, message:{"data":{"awardId":102,"awardTitle":"随机积分","userId":"utaaa"},"id":"84144718413","timestamp":1759301229587}
25-10-01.14:47:09.723 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award, message:{"data":{"awardId":102,"awardTitle":"随机积分","userId":"utaaa"},"id":"84144718413","timestamp":1759301229587}
25-10-01.14:47:15.019 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】-更新奖品消耗库存 strategyId:100006, awardId:102
25-10-01.14:48:14.346 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-10-01.14:48:14.348 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-10-01.14:48:14.986 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-10-01.14:48:15.186 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
